<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>导出画质评估</title>
    <style>
      body { font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif; margin: 24px; }
      .card { max-width: 820px; margin: 0 auto; padding: 16px; border: 1px solid #e5e7eb; border-radius: 12px; }
      h1 { font-size: 20px; margin: 0 0 12px; }
      label { display: block; margin-top: 12px; font-weight: 600; }
      input[type="number"], input[type="text"] { width: 220px; padding: 6px 8px; border: 1px solid #ddd; border-radius: 8px; }
      input[type="file"] { margin-top: 8px; }
      .row { display: flex; gap: 16px; flex-wrap: wrap; }
      button { margin-top: 16px; padding: 10px 16px; background: #111827; color: white; border: 0; border-radius: 8px; cursor: pointer; }
      pre { background: #f9fafb; padding: 12px; border-radius: 8px; overflow-x: auto; }
      .small { color: #6b7280; font-size: 12px; }
    </style>
  </head>
  <body>
    <div class="card">
      <h1>导出画质评估</h1>
      <form id="eval-form">
        <label>导出前视频（参考）
          <input type="file" name="beforeVideo" accept="video/*" required />
        </label>
        <label>导出后视频（待评估）
          <input type="file" name="afterVideo" accept="video/*" required />
        </label>

        <div class="row">
          <div>
            <label>导出用时（秒）
              <input type="number" step="0.01" name="exportTimeSeconds" placeholder="例如 120" required />
            </label>
            <div class="small">将结合视频时长计算实时因子（RTF），RTF≥1为实时或更快。</div>
          </div>
          <div>
            <label>目标RTF（可选，默认1.0）
              <input type="number" step="0.01" name="targetRTF" placeholder="1.0" />
            </label>
          </div>
          <div>
            <label>目标码率（kbps，可选）
              <input type="number" step="1" name="targetBitrateKbps" placeholder="不填则使用参考视频码率" />
            </label>
          </div>
        </div>

        <h2 style="font-size:16px;margin-top:16px;">权重设置（总和自动归一化）</h2>
        <div class="row">
          <div>
            <label>画质权重
              <input type="number" step="0.01" name="w_quality" placeholder="默认0.6" />
            </label>
          </div>
          <div>
            <label>速度权重
              <input type="number" step="0.01" name="w_speed" placeholder="默认0.2" />
            </label>
          </div>
          <div>
            <label>码率权重
              <input type="number" step="0.01" name="w_bitrate" placeholder="默认0.2" />
            </label>
          </div>
        </div>

        <button type="submit">开始评估</button>
      </form>

      <div id="result" style="margin-top:16px;"></div>
    </div>
    <script src="/app.js"></script>
  </body>
  </html>

